<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jornalzinho Contra o Bullying Prof Francine</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body,
      header {
        padding: 20px;
      }
      .container,
      header {
        overflow: hidden;
        position: relative;
      }
      .nav-btn,
      .sidebar,
      body {
        display: flex;
      }
      .screen.active,
      label {
        display: block;
      }
      .nav-btn,
      label {
        font-weight: 700;
      }
      h2,
      label {
        color: #4facfe;
      }
      .chart-wrapper,
      .container,
      .main-content,
      header {
        position: relative;
      }
      footer,
      header {
        background: linear-gradient(to right, #4facfe 0, #00f2fe 100%);
        color: #fff;
        text-align: center;
      }
      .chart-actions,
      .feature-card,
      .option,
      .result-card,
      .welcome-text,
      footer,
      h2,
      header {
        text-align: center;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Comic Sans MS", cursive, sans-serif;
      }
      body {
        background: linear-gradient(135deg, #ff9a9e 0, #fad0c4 100%);
        min-height: 100vh;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
      }
      .container {
        width: 100%;
        max-width: 900px;
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }
      h1 {
        font-size: 2.8rem;
        text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
        margin-bottom: 10px;
        animation: 2s infinite titlePulse;
      }
      .subtitle {
        font-size: 1.3rem;
        opacity: 0.9;
      }
      .app-container {
        display: flex;
        min-height: 600px;
      }
      .sidebar {
        width: 250px;
        background: linear-gradient(to bottom, #a1c4fd 0, #c2e9fb 100%);
        padding: 20px 15px;
        flex-direction: column;
        box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
      }
      .nav-btn {
        background: linear-gradient(to right, #43e97b 0, #38f9d7 100%);
        color: #333;
        border: none;
        border-radius: 50px;
        padding: 15px;
        margin: 10px 0;
        font-size: 1.1rem;
        cursor: pointer;
        align-items: center;
        justify-content: center;
        transition: 0.3s;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .feature-card,
      .interview-form {
        background: #fff;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      .nav-btn i {
        margin-right: 10px;
        font-size: 1.2rem;
      }
      .btn:hover,
      .nav-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }
      .nav-btn.active {
        background: linear-gradient(to right, #ff5858 0, #f09819 100%);
        color: #fff;
      }
      .main-content {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
      }
      .screen {
        display: none;
        animation: 0.5s ease-in-out fadeIn;
      }
      h2 {
        margin-bottom: 20px;
        font-size: 2rem;
      }
      .welcome-text {
        font-size: 1.2rem;
        line-height: 1.6;
        color: #555;
        margin-bottom: 30px;
      }
      .btn,
      label {
        font-size: 1.1rem;
      }
      .features {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin: 30px 0;
      }
      .feature-card {
        border-radius: 15px;
        padding: 20px;
        width: 200px;
        transition: transform 0.3s;
      }
      .feature-card:hover {
        transform: translateY(-10px);
      }
      .feature-card i {
        font-size: 2.5rem;
        color: #4facfe;
        margin-bottom: 15px;
      }
      .interview-form {
        border-radius: 20px;
        padding: 25px;
      }
      .form-group {
        margin-bottom: 20px;
      }
      label {
        margin-bottom: 8px;
      }
      input,
      select,
      textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #c2e9fb;
        border-radius: 10px;
        font-size: 1rem;
        transition: border-color 0.3s;
      }
      input:focus,
      select:focus,
      textarea:focus {
        border-color: #4facfe;
        outline: 0;
      }
      .question-container {
        background: #f0f9ff;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        border-left: 5px solid #4facfe;
      }
      .options {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 10px;
      }
      .option {
        flex: 1;
        min-width: 120px;
        background: #fff;
        border: 2px solid #c2e9fb;
        border-radius: 10px;
        padding: 12px;
        cursor: pointer;
        transition: 0.2s;
      }
      .btn,
      .download-btn {
        cursor: pointer;
        transition: 0.3s;
        color: #333;
        font-weight: 700;
      }
      .option:hover {
        background: #e6f7ff;
        transform: scale(1.05);
      }
      .option.selected {
        background: #4facfe;
        color: #fff;
        border-color: #4facfe;
      }
      .btn {
        background: linear-gradient(to right, #ff9a9e 0, #fad0c4 100%);
        border: none;
        border-radius: 50px;
        padding: 15px 30px;
        display: block;
        margin: 30px auto 0;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .chart-container {
        background: #fff;
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
      }
      .chart-wrapper {
        height: 400px;
      }
      .cloud,
      .decoration,
      .star {
        position: absolute;
      }
      .chart-actions {
        margin-top: 20px;
      }
      .download-btn {
        background: linear-gradient(to right, #43e97b 0, #38f9d7 100%);
        border: none;
        border-radius: 50px;
        padding: 12px 25px;
        font-size: 1rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin: 0 10px;
      }
      .download-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }
      .results-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 30px;
      }
      .result-card {
        flex: 1;
        min-width: 200px;
        background: linear-gradient(to bottom, #a1c4fd 0, #c2e9fb 100%);
        border-radius: 15px;
        padding: 20px;
        color: #333;
      }
      .result-value {
        font-size: 2.5rem;
        font-weight: 700;
        margin: 10px 0;
        color: #ff6b6b;
      }
      .result-label {
        font-size: 1.1rem;
      }
      .floating {
        animation: 3s ease-in-out infinite floating;
      }
      .bounce {
        animation: 2s infinite bounce;
      }
      .pulse {
        animation: 2s infinite pulse;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes titlePulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.03);
        }
      }
      @keyframes floating {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-15px);
        }
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }
      .decoration {
        z-index: 0;
      }
      .cloud {
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      .cloud:first-child {
        top: 10%;
        left: 5%;
        width: 80px;
        height: 40px;
        animation: 6s ease-in-out infinite floating;
      }
      .cloud:nth-child(2) {
        top: 25%;
        right: 7%;
        width: 100px;
        height: 50px;
        animation: 7s ease-in-out infinite floating;
      }
      .cloud:nth-child(3) {
        bottom: 15%;
        left: 8%;
        width: 70px;
        height: 35px;
        animation: 5s ease-in-out infinite floating;
      }
      .star {
        color: gold;
        font-size: 1.5rem;
        animation: 3s infinite bounce;
      }
      .star:nth-child(4) {
        top: 15%;
        left: 20%;
      }
      .star:nth-child(5) {
        top: 40%;
        right: 25%;
        animation-delay: 0.5s;
      }
      .star:nth-child(6) {
        bottom: 20%;
        right: 15%;
        animation-delay: 1s;
      }
      footer {
        padding: 15px;
        font-size: 0.9rem;
      }
      @media (max-width: 768px) {
        .app-container {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: center;
        }
        .nav-btn {
          margin: 5px;
          padding: 10px 15px;
        }
        h1 {
          font-size: 2.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1><i class="fas fa-newspaper"></i> Jornalzinho Contra o Bullying</h1>
        <p class="subtitle">Professora Francine 4ª ano</p>
      </header>

      <div class="app-container">
        <div class="sidebar">
          <button class="nav-btn active" data-screen="welcome">
            <i class="fas fa-home"></i> <a style="text-decoration: none;" href="../index.html">Voltar</a>
          </button>
          <button class="nav-btn" data-screen="interview">
            <i class="fas fa-microphone-alt"></i> Entrevista
          </button>
          <button class="nav-btn" data-screen="results">
            <i class="fas fa-chart-pie"></i> Resultados
          </button>
          <button class="nav-btn" data-screen="data">
            <i class="fas fa-database"></i> Dados Salvos
          </button>
        </div>

        <div class="main-content">
          <!-- Decorações -->
          <div class="decoration">
            <div class="cloud"></div>
            <div class="cloud"></div>
            <div class="cloud"></div>
            <div class="star"><i class="fas fa-star"></i></div>
            <div class="star"><i class="fas fa-star"></i></div>
            <div class="star"><i class="fas fa-star"></i></div>
          </div>

          <!-- Tela de Boas-Vindas -->
          <div id="welcome-screen" class="screen active">
            <div class="welcome-content">
              <h2 class="floating">
                Bem-vindo ao Jornalzinho Contra o Bullying!
              </h2>
              <p class="welcome-text">
                Este é um espaço seguro onde você pode entrevistar seus colegas
                sobre bullying e ajudar nossa escola a ser um lugar mais
                acolhedor para todos!
              </p>

              <div class="features">
                <div class="feature-card pulse">
                  <i class="fas fa-comments"></i>
                  <h3>Entrevistas</h3>
                  <p>Faça perguntas sobre bullying</p>
                </div>
                <div class="feature-card pulse" style="animation-delay: 0.2s">
                  <i class="fas fa-save"></i>
                  <h3>Salve Dados</h3>
                  <p>Guarde todas as respostas</p>
                </div>
                <div class="feature-card pulse" style="animation-delay: 0.4s">
                  <i class="fas fa-chart-bar"></i>
                  <h3>Gráficos</h3>
                  <p>Veja resultados em gráficos</p>
                </div>
              </div>

              <div style="text-align: center; margin-top: 30px">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234facfe'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm0-10h2v8h-2z'/%3E%3C/svg%3E"
                  alt="Anti-Bullying"
                  style="width: 100px; height: 100px; opacity: 0.8"
                />
              </div>
            </div>
          </div>

          <!-- Tela de Entrevista -->
          <div id="interview-screen" class="screen">
            <h2>Entrevista sobre Bullying</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #555">
              Faça perguntas para seus colegas e registre as respostas
            </p>

            <div class="interview-form">
              <div class="form-group">
                <label for="interviewee-name"
                  ><i class="fas fa-user-friends"></i> Nome do Colega
                  Entrevistado</label
                >
                <input
                  type="text"
                  id="interviewee-name"
                  placeholder="Digite o nome do colega"
                />
              </div>

              <div class="form-group">
                <label for="interview-date"
                  ><i class="fas fa-calendar-alt"></i> Data da Entrevista</label
                >
                <input type="date" id="interview-date" />
              </div>

              <div class="question-container" data-question="q1">
                <label
                  ><i class="fas fa-question-circle"></i> Você já sofreu
                  bullying na escola?</label
                >
                <div class="options">
                  <div class="option" data-value="sim">Sim</div>
                  <div class="option" data-value="nao">Não</div>
                  <div class="option" data-value="talvez">Talvez</div>
                </div>
              </div>

              <div class="question-container" data-question="q2">
                <label
                  ><i class="fas fa-question-circle"></i> Você já presenciou
                  alguém sofrendo bullying?</label
                >
                <div class="options">
                  <div class="option" data-value="sim">Sim</div>
                  <div class="option" data-value="nao">Não</div>
                  <div class="option" data-value="talvez">Talvez</div>
                </div>
              </div>

              <div class="question-container" data-question="q3">
                <label
                  ><i class="fas fa-question-circle"></i> O que você faz quando
                  vê alguém sofrendo bullying?</label
                >
                <div class="options">
                  <div class="option" data-value="ajudo">Ajudo a pessoa</div>
                  <div class="option" data-value="professor">
                    Conto para o professor
                  </div>
                  <div class="option" data-value="nada">Não faço nada</div>
                </div>
              </div>

              <div class="question-container" data-question="q4">
                <label
                  ><i class="fas fa-question-circle"></i> Como você se sente em
                  relação ao bullying?</label
                >
                <div class="options">
                  <div class="option" data-value="triste">Triste</div>
                  <div class="option" data-value="com-raiva">Com raiva</div>
                  <div class="option" data-value="assustado">Assustado</div>
                  <div class="option" data-value="indiferente">Indiferente</div>
                </div>
              </div>

              <button class="btn" id="save-interview">
                <i class="fas fa-save"></i> Salvar Entrevista
              </button>
            </div>
          </div>

          <!-- Tela de Resultados -->
          <div id="results-screen" class="screen">
            <h2>Resultados da Pesquisa</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #555">
              Veja os gráficos com os resultados das entrevistas
            </p>

            <div class="chart-container">
              <div class="chart-wrapper">
                <canvas id="bullying-chart"></canvas>
              </div>
              <div class="chart-actions">
                <button class="download-btn" id="download-chart">
                  <i class="fas fa-download"></i> Baixar Gráfico (JPG)
                </button>
                <button class="download-btn" id="download-report">
                  <i class="fas fa-file-alt"></i> Baixar Relatório Completo
                </button>
              </div>
            </div>

            <div class="results-container">
              <div class="result-card">
                <i class="fas fa-users" style="font-size: 2rem"></i>
                <div class="result-value" id="total-interviews">0</div>
                <div class="result-label">Entrevistas Realizadas</div>
              </div>

              <div class="result-card">
                <i class="fas fa-sad-tear" style="font-size: 2rem"></i>
                <div class="result-value" id="bullying-victims">0%</div>
                <div class="result-label">Já sofreram bullying</div>
              </div>

              <div class="result-card">
                <i class="fas fa-eye" style="font-size: 2rem"></i>
                <div class="result-value" id="witnesses">0%</div>
                <div class="result-label">Já presenciaram bullying</div>
              </div>
            </div>
          </div>

          <!-- Tela de Dados Salvos -->
          <div id="data-screen" class="screen">
            <h2>Dados Salvos</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #555">
              Todas as entrevistas realizadas
            </p>

            <div
              id="saved-data-container"
              style="
                background: white;
                border-radius: 20px;
                padding: 20px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
              "
            >
              <table style="width: 100%; border-collapse: collapse">
                <thead>
                  <tr style="background: #4facfe; color: white">
                    <th style="padding: 12px; text-align: left">
                      Entrevistado
                    </th>
                    <th style="padding: 12px; text-align: left">Data</th>
                    <th style="padding: 12px; text-align: left">
                      Sofreu Bullying?
                    </th>
                  </tr>
                </thead>
                <tbody id="saved-data-body">
                  <!-- Dados serão inseridos aqui pelo JavaScript -->
                </tbody>
              </table>
            </div>

            <button
              class="btn"
              id="clear-data"
              style="
                margin-top: 20px;
                background: linear-gradient(to right, #ff6b6b 0%, #ff8e8e 100%);
              "
            >
              <i class="fas fa-trash-alt"></i> Limpar Todos os Dados
            </button>
          </div>
        </div>
      </div>

      <footer>
        <p>
          Projeto Prof. Francine para conscientização sobre bullying | 4ª ano
        </p>
      </footer>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let e = document.querySelectorAll(".nav-btn"),
          t = document.querySelectorAll(".screen"),
          a = document.querySelectorAll(".option"),
          n = document.getElementById("save-interview"),
          l = document.getElementById("clear-data"),
          i = document.getElementById("saved-data-body"),
          s = document.getElementById("download-chart"),
          r = document.getElementById("download-report"),
          o = { interviewee: "", date: "", answers: {} },
          d = null;
        function c() {
          let e = JSON.parse(localStorage.getItem("bullyingInterviews")) || [];
          if (((i.innerHTML = ""), 0 === e.length)) {
            i.innerHTML =
              '<tr><td colspan="3" style="text-align: center; padding: 20px; color: #666;">Nenhuma entrevista salva ainda</td></tr>';
            return;
          }
          e.forEach((e) => {
            let t = document.createElement("tr"),
              a = e.answers.q1 || "Não respondido";
            (t.innerHTML = `
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">${e.interviewee}</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">${e.date}</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">${a}</td>
                    `),
              i.appendChild(t);
          });
        }
        function g() {
          let e = JSON.parse(localStorage.getItem("bullyingInterviews")) || [];
          if (
            ((document.getElementById("total-interviews").textContent =
              e.length),
            0 === e.length)
          ) {
            (document.getElementById("bullying-victims").textContent = "0%"),
              (document.getElementById("witnesses").textContent = "0%"),
              (function e() {
                let t = document
                  .getElementById("bullying-chart")
                  .getContext("2d");
                d && d.destroy(),
                  (d = new Chart(t, {
                    type: "doughnut",
                    data: {
                      labels: ["Nenhuma entrevista realizada"],
                      datasets: [
                        {
                          data: [1],
                          backgroundColor: ["#e0e0e0"],
                          borderWidth: 0,
                        },
                      ],
                    },
                    options: {
                      responsive: !0,
                      maintainAspectRatio: !1,
                      plugins: {
                        legend: {
                          position: "bottom",
                          labels: { font: { size: 14 }, padding: 20 },
                        },
                        title: {
                          display: !0,
                          text: "Faça algumas entrevistas para ver os resultados",
                          font: { size: 18 },
                        },
                      },
                    },
                  }));
              })();
            return;
          }
          let t = 0,
            a = 0,
            n = { ajudo: 0, professor: 0, nada: 0 },
            l = { triste: 0, "com-raiva": 0, assustado: 0, indiferente: 0 };
          e.forEach((e) => {
            "sim" === e.answers.q1 && t++,
              "sim" === e.answers.q2 && a++,
              e.answers.q3 &&
                n.hasOwnProperty(e.answers.q3) &&
                n[e.answers.q3]++,
              e.answers.q4 &&
                l.hasOwnProperty(e.answers.q4) &&
                l[e.answers.q4]++;
          });
          let i = Math.round((t / e.length) * 100),
            s = Math.round((a / e.length) * 100);
          (document.getElementById("bullying-victims").textContent = `${i}%`),
            (document.getElementById("witnesses").textContent = `${s}%`),
            (function e(t, a, n) {
              let l = document
                .getElementById("bullying-chart")
                .getContext("2d");
              d && d.destroy(),
                (d = new Chart(l, {
                  type: "doughnut",
                  data: {
                    labels: [
                      "Sofreram Bullying",
                      "Apenas Presenciaram",
                      "Não Envolvidos",
                    ],
                    datasets: [
                      {
                        data: [t, Math.max(0, a - t), n],
                        backgroundColor: ["#ff6b6b", "#4facfe", "#a1c4fd"],
                        borderWidth: 3,
                        borderColor: "#ffffff",
                      },
                    ],
                  },
                  options: {
                    responsive: !0,
                    maintainAspectRatio: !1,
                    plugins: {
                      legend: {
                        position: "bottom",
                        labels: {
                          font: { size: 14 },
                          padding: 20,
                          usePointStyle: !0,
                        },
                      },
                      title: {
                        display: !0,
                        text: "Resultados da Pesquisa sobre Bullying",
                        font: { size: 18, weight: "bold" },
                        padding: 20,
                      },
                      tooltip: {
                        callbacks: {
                          label: function (e) {
                            let t = e.dataset.data.reduce((e, t) => e + t, 0),
                              a = ((e.parsed / t) * 100).toFixed(1);
                            return `${e.label}: ${e.parsed} (${a}%)`;
                          },
                        },
                      },
                    },
                    animation: {
                      animateRotate: !0,
                      animateScale: !0,
                      duration: 1e3,
                    },
                  },
                }));
            })(t, a, e.length - a);
        }
        e.forEach((a) => {
          a.addEventListener("click", () => {
            let n = a.getAttribute("data-screen");
            e.forEach((e) => e.classList.remove("active")),
              a.classList.add("active"),
              t.forEach((e) => e.classList.remove("active")),
              document.getElementById(`${n}-screen`).classList.add("active"),
              "results" === n &&
                setTimeout(() => {
                  g();
                }, 100),
              "data" === n && c();
          });
        }),
          a.forEach((e) => {
            e.addEventListener("click", () => {
              let t = e.closest(".question-container"),
                a = t.getAttribute("data-question");
              t.querySelectorAll(".option").forEach((e) => {
                e.classList.remove("selected");
              }),
                e.classList.add("selected"),
                (o.answers[a] = e.getAttribute("data-value"));
            });
          }),
          n.addEventListener("click", () => {
            var e;
            (o.interviewee =
              document.getElementById("interviewee-name").value ||
              "Anônimo"),
              (o.date =
                document.getElementById("interview-date").value ||
                new Date().toISOString().split("T")[0]);
            let t = document.querySelectorAll(".question-container").length,
              a = Object.keys(o.answers).length;
            if (a < t) {
              alert("Por favor, responda todas as perguntas antes de salvar!");
              return;
            }
            let n;
            (e = o),
              (n =
                JSON.parse(localStorage.getItem("bullyingInterviews")) ||
                []).push(e),
              localStorage.setItem("bullyingInterviews", JSON.stringify(n)),
              (document.getElementById("interviewee-name").value = ""),
              (document.getElementById("interview-date").value = ""),
              document.querySelectorAll(".option").forEach((e) => {
                e.classList.remove("selected");
              }),
              (o = { interviewee: "", date: "", answers: {} }),
              alert("Entrevista salva com sucesso!");
          }),
          l.addEventListener("click", () => {
            confirm(
              "Tem certeza que deseja apagar todos os dados? Esta ação não pode ser desfeita."
            ) &&
              (localStorage.removeItem("bullyingInterviews"),
              c(),
              g(),
              alert("Todos os dados foram apagados!"));
          }),
          s.addEventListener("click", () => {
            if (d) {
              let e = document.getElementById("bullying-chart"),
                t = e.toDataURL("image/jpeg", 0.8),
                a = document.createElement("a");
              (a.download = `pesquisa-bullying-${
                new Date().toISOString().split("T")[0]
              }.jpg`),
                (a.href = t),
                a.click();
            } else
              alert(
                "Nenhum gráfico disponível para download. Faça algumas entrevistas primeiro!"
              );
          }),
          r.addEventListener("click", () => {
            (function e() {
              var t;
              let a =
                JSON.parse(localStorage.getItem("bullyingInterviews")) || [];
              if (0 === a.length) {
                alert(
                  "Nenhuma entrevista disponível para gerar relatório!"
                );
                return;
              }
              let n = document.createElement("canvas");
              (n.width = 800), (n.height = 1200);
              let l = n.getContext("2d");
              (l.fillStyle = "#ffffff"),
                l.fillRect(0, 0, n.width, n.height),
                (l.fillStyle = "#4facfe"),
                (l.font = "bold 32px Arial"),
                (l.textAlign = "center"),
                l.fillText(
                  "Relatório da Pesquisa sobre Bullying",
                  n.width / 2,
                  50
                ),
                (l.fillStyle = "#666666"),
                (l.font = "18px Arial"),
                l.fillText(
                  `Gerado em: ${new Date().toLocaleDateString("pt-BR")}`,
                  n.width / 2,
                  80
                );
              let i = 140;
              (l.fillStyle = "#333333"),
                (l.font = "bold 24px Arial"),
                (l.textAlign = "left");
              let s,
                r,
                o =
                  ((t = a),
                  (s = 0),
                  (r = 0),
                  t.forEach((e) => {
                    "sim" === e.answers.q1 && s++,
                      "sim" === e.answers.q2 && r++;
                  }),
                  {
                    victims: s,
                    witnesses: r,
                    victimPercentage: Math.round((s / t.length) * 100),
                    witnessPercentage: Math.round((r / t.length) * 100),
                  });
              l.fillText(`Total de Entrevistas: ${a.length}`, 50, i),
                (i += 40),
                l.fillText(
                  `Sofreram Bullying: ${o.victims} (${o.victimPercentage}%)`,
                  50,
                  i
                ),
                (i += 40),
                l.fillText(
                  `Presenciaram Bullying: ${o.witnesses} (${o.witnessPercentage}%)`,
                  50,
                  i
                ),
                (function e(t, a, n, l) {
                  let i = a + 150,
                    s = n + 150;
                  l.victims, l.witnesses, l.victims, l.witnessPercentage;
                  let r = -Math.PI / 2;
                  (t.fillStyle = "#ff6b6b"), t.beginPath(), t.moveTo(i, s);
                  let o = (l.victims / 100) * 2 * Math.PI;
                  t.arc(i, s, 100, r, r + o),
                    t.closePath(),
                    t.fill(),
                    (r += o),
                    (t.fillStyle = "#4facfe"),
                    t.beginPath(),
                    t.moveTo(i, s);
                  let d = ((l.witnesses - l.victims) / 100) * 2 * Math.PI;
                  t.arc(i, s, 100, r, r + d),
                    t.closePath(),
                    t.fill(),
                    (r += d),
                    (t.fillStyle = "#a1c4fd"),
                    t.beginPath(),
                    t.moveTo(i, s),
                    t.arc(i, s, 100, r, r + (2 * Math.PI - o - d)),
                    t.closePath(),
                    t.fill(),
                    (t.font = "16px Arial"),
                    (t.fillStyle = "#333333"),
                    t.fillText(
                      "🔴 Sofreram Bullying",
                      a + 320,
                      n + 50
                    ),
                    t.fillText(
                      "🔵 Apenas Presenciaram",
                      a + 320,
                      n + 80
                    ),
                    t.fillText(
                      "🟣 Não Envolvidos",
                      a + 320,
                      n + 110
                    );
                })(l, 50, (i += 60), o);
              let d = n.toDataURL("image/jpeg", 0.8),
                c = document.createElement("a");
              (c.download = `relatorio-completo-bullying-${
                new Date().toISOString().split("T")[0]
              }.jpg`),
                (c.href = d),
                c.click();
            })();
          }),
          (document.getElementById("interview-date").valueAsDate = new Date()),
          document.querySelectorAll(".feature-card").forEach((e, t) => {
            e.style.animationDelay = `${0.2 * t}s`;
          }),
          c(),
          g();
      });
    </script>
  </body>
</html>